# Тестирование двойного клика на существующих книгах

## Как протестировать на уже загруженных книгах

### Шаг 1: Откройте приложение
- Перейдите на `http://localhost:3000`
- Убедитесь, что приложение загрузилось

### Шаг 2: Выберите существующую книгу
- В каталоге книг выберите любую уже загруженную книгу
- Откройте её в читалке

### Шаг 3: Откройте консоль браузера
- Нажмите F12 или Ctrl+Shift+I (Cmd+Option+I на Mac)
- Перейдите на вкладку "Console"
- Очистите консоль (Ctrl+L или Cmd+K)

### Шаг 4: Протестируйте двойной клик
- Найдите любое английское слово в тексте
- Дважды кликните на него (слово автоматически выделится)
- В консоли должны появиться логи:
  ```
  === ДВОЙНОЙ КЛИК ОБРАБОТАН ===
  Время: 15:30:45
  Книга: [Название книги] (ID: [ID])
  Текущая страница: 1
  Элемент: <p>...</p>
  Координаты клика: X Y
  Текст элемента: ...
  Выделенный текст: reflected
  Выделено одно слово, обрабатываем как двойной клик: reflected
  === ДОБАВЛЕНИЕ СЛОВА В СЛОВАРЬ ===
  Слово: reflected
  Оригинальное слово: reflected
  Перевод: ...
  ```

### Шаг 5: Проверьте результат
- Должно появиться зеленое уведомление "Слово добавлено в словарь"
- Откройте панель словаря (иконка книги в левой панели)
- Слово должно появиться в списке

### Шаг 6: Проверьте дублирование
- Попробуйте дважды кликнуть на то же слово снова
- Должно появиться синее уведомление "Слово уже добавлено в словарь"

## Что проверять

### ✅ Основная функциональность
- [ ] Двойной клик обрабатывается
- [ ] Слово определяется корректно
- [ ] Перевод загружается
- [ ] Слово добавляется в словарь
- [ ] Показывается уведомление об успехе

### ✅ Проверка дублирования
- [ ] Повторный двойной клик на то же слово
- [ ] Показывается информационное уведомление
- [ ] Слово не добавляется повторно

### ✅ Различные типы слов
- [ ] Короткие слова (2-3 буквы)
- [ ] Длинные слова (10+ букв)
- [ ] Слова с заглавными буквами
- [ ] Слова с цифрами или символами
- [ ] Слова в начале/середине/конце строки

### ✅ Обработка ошибок
- [ ] Клик по пустому месту
- [ ] Клик по знакам препинания
- [ ] Ошибка при загрузке перевода
- [ ] Ошибка при сохранении в localStorage

## Отладочная информация

Все действия логируются в консоль браузера. Если что-то не работает:

1. **Проверьте логи в консоли** - они покажут, на каком этапе происходит ошибка
2. **Убедитесь, что клик происходит по тексту** - не по пустому месту
3. **Проверьте подключение к интернету** - для загрузки переводов
4. **Проверьте localStorage** - в DevTools → Application → Local Storage

## Возможные проблемы

### Слово не определяется
- Клик происходит не по тексту
- Проблема с алгоритмом определения позиции
- Проверьте логи в консоли

### Перевод не загружается
- Нет подключения к интернету
- Проблема с API переводчика
- Проверьте сетевые запросы в DevTools

### Слово не добавляется в словарь
- Ошибка в localStorage
- Проблема с обновлением состояния
- Проверьте логи в консоли

### Уведомления не появляются
- CSS не загружен
- Конфликт стилей
- Проверьте консоль на ошибки
