# Руководство по тестированию двойного клика

## Проблема
Двойной клик по слову не приводит к добавлению его в словарь.

## Что было исправлено

1. **Порядок функций**: Переместили функции `showNotification` и `addWordToDictionary` перед `handleDoubleClick`
2. **Зависимости useCallback**: Добавили `addWordToDictionary` в зависимости `handleDoubleClick`
3. **Алгоритм определения слова**: Улучшили метод определения слова под курсором
4. **Отладочные логи**: Добавили подробные логи для диагностики

## Как тестировать

### Шаг 1: Откройте приложение
- Перейдите на `http://localhost:3000`
- Убедитесь, что приложение загрузилось

### Шаг 2: Загрузите тестовый файл
- Нажмите "Выбрать файлы" или перетащите файл
- Выберите `test-simple.txt` или `test-double-click.txt`
- Дождитесь загрузки файла

### Шаг 3: Откройте консоль браузера
- Нажмите F12 или Ctrl+Shift+I (Cmd+Option+I на Mac)
- Перейдите на вкладку "Console"

### Шаг 4: Протестируйте двойной клик
- Дважды кликните на любое слово в тексте
- В консоли должны появиться логи:
  ```
  === ДВОЙНОЙ КЛИК ОБРАБОТАН ===
  Элемент: <p>...</p>
  Координаты клика: X Y
  Текст элемента: ...
  Позиция клика X: ...
  Найденное слово: ...
  Очищенное слово: ...
  === ДОБАВЛЕНИЕ СЛОВА В СЛОВАРЬ ===
  Слово: ...
  Оригинальное слово: ...
  Перевод: ...
  ```

### Шаг 5: Проверьте результат
- Должно появиться зеленое уведомление "Слово добавлено в словарь"
- Откройте панель словаря (иконка книги)
- Слово должно появиться в списке

## Возможные проблемы

### Слово не определяется
- Проверьте логи в консоли
- Убедитесь, что клик происходит по тексту, а не по пустому месту

### Перевод не загружается
- Проверьте подключение к интернету
- Проверьте настройки API переводчика

### Слово не добавляется в словарь
- Проверьте логи в консоли
- Убедитесь, что нет ошибок в localStorage

### Уведомления не появляются
- Проверьте, что CSS анимации загружены
- Проверьте, что нет конфликтов с другими стилями

## Отладочная информация

Все действия логируются в консоль браузера:
- Координаты клика
- Определенное слово
- Процесс перевода
- Сохранение в словарь
- Ошибки (если есть)

## Файлы для тестирования

- `test-simple.txt` - простой тест с базовыми словами
- `test-double-click.txt` - расширенный тест с различными типами слов
